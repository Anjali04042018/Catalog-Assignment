<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalog Assignment</title>
</head>
<body>
    <h1>Catalog Assignment</h1>
    <div id="out"></div>
    <script>
        async function lD() {
            const res = await fetch('t1.json');
            //const res = await fetch('t2.json');
            return await res.json();
        }

        function b2D(b, v) {
            return parseInt(v, parseInt(b));
        }

        function lI(xA, yA) {
            const c = xA.length;
            let r = 0;

            for (let i = 0; i < c; i++) {
                let yT = yA[i];
                let p = 1;

                for (let j = 0; j < c; j++) {
                    if (i !== j) {
                        p *= (0 - xA[j]) / (xA[i] - xA[j]);
                    }
                }
                r += yT * p;
            }

            return Math.round(r);
        }

        async function fC() {
            const jD = await lD();
            const tP = jD.keys.n;
            const tH = jD.keys.k;

            const xV = [];
            const yV = [];

            for (let i = 1; i <= tP; i++) {
                const pt = jD[i];
                if (pt) {
                    xV.push(i);
                    yV.push(b2D(pt.base, pt.value));
                }
            }

            const cT = lI(xV, yV);
            document.getElementById('out').innerText = `constant: ${cT}`;
        }

        fC();
    </script>
</body>
</html>